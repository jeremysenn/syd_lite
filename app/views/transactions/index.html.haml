%table.table.table-striped.sortable
  %thead
    %tr
      %th= transactions_sortable 'tranID', "TranID"
      %th= transactions_sortable 'CreateDate', "Date"
      -#
        %th= sortable 'dev_id', "Dev ID"
      %th= transactions_sortable 'tran_status', "Status"
      - if @error_code_column_count and @error_code_column_count > 0
        %th= transactions_sortable 'error_code', "Return Code"
      %th= transactions_sortable 'tran_code', "Tran Code"
      - if @receipt_nbr_column_count and @receipt_nbr_column_count > 0
        %th= transactions_sortable 'receipt_nbr', "Receipt"
      %th= transactions_sortable 'amt_req', "Amt Req"
      %th= transactions_sortable 'amt_auth', "Amt Auth"
      %th= "Images"
  %tbody
    - @transactions.each do |transaction|
      %tr
        %td= link_to transaction.id, transaction
        %td= transaction.CreateDate.strftime("%-m/%-d/%y %l:%M%p")
        -#
          %td= transaction.dev_id
        %td= link_to transaction.status_description, '#', "data-toggle" => "tooltip", "data-placement" => "right", "title" => "#{transaction.status_long_description}"
        - if @error_code_column_count and @error_code_column_count > 0
          %td= link_to transaction.error_code_description, '#', "data-toggle" => "tooltip", "data-placement" => "right", "title" => "#{transaction.error_code_long_description}"
        %td= transaction.tran_code
        - if @receipt_nbr_column_count and @receipt_nbr_column_count > 0
          %td= transaction.receipt_nbr
        %td= number_to_currency(transaction.amt_req)
        %td= number_to_currency(transaction.amt_auth)
        %td
          %a{href: "#transaction_#{transaction.id}_images", "data-toggle" => "modal"}
            %i.fa.fa-picture-o
      %div{id: "transaction_#{transaction.id}_images", :class => "modal fade", :style => "display:none;"}
        .modal-dialog
          .modal-content
            .modal-header
              = link_to "Ã—", '#', :class => "close", "data-dismiss" => "modal"
              %strong= "Transaction #{transaction.id}"
            .modal-body
              Transaction images
            .modal-footer
              = link_to 'Close', '#', :class => 'btn btn-primary', "data-dismiss" => "modal"
= paginate @transactions, :param_name => "transactions_page"
            